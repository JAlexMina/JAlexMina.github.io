<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Juan A. Mina Portfolio</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="landing is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

				<!-- Header -->
					<header id="header" class="alt">
						<h1><a href="index.html">Spectral</a></h1>
						<nav id="nav">
							<ul>
								<li class="special">
									<a href="#menu" class="menuToggle"><span>Menu</span></a>
									<div id="menu">
										<ul>
											<li><a href="index.html">Home</a></li>
											<li><a href="generic.html">Generic</a></li>
											<li><a href="elements.html">Elements</a></li>
											<li><a href="#">Sign Up</a></li>
											<li><a href="#">Log In</a></li>
										</ul>
									</div>
								</li>
							</ul>
						</nav>
					</header>

				<!-- Banner -->
					<section id="banner">
						<div class="inner">
							<h2>Juan Alejandro Mina</h2>
							<p>Portfolio (Under Construction)</p>
							<canvas id="glcanvas" width="250" height="250"></canvas>
						</div>

						

						<a href="#one" class="more scrolly">Learn More</a>
					</section>

				

				<!-- One -->
					<section id="one" class="wrapper style1 special">
						<div class="inner">
							<header class="major">
								<h2>Arcu aliquet vel lobortis ata nisl<br />
								eget augue amet aliquet nisl cep donec</h2>
								<p>Aliquam ut ex ut augue consectetur interdum. Donec amet imperdiet eleifend<br />
								fringilla tincidunt. Nullam dui leo Aenean mi ligula, rhoncus ullamcorper.</p>
							</header>
							<ul class="icons major">
								<li><span class="icon fa-gem major style1"><span class="label">Lorem</span></span></li>
								<li><span class="icon fa-heart major style2"><span class="label">Ipsum</span></span></li>
								<li><span class="icon solid fa-code major style3"><span class="label">Dolor</span></span></li>
							</ul>
						</div>
					</section>

				<!-- Two -->
					<section id="two" class="wrapper alt style2">
						<section class="spotlight">
							<div class="image"><img src="images/pic01.jpg" alt="" /></div><div class="content">
								<h2>Magna primis lobortis<br />
								sed ullamcorper</h2>
								<p>Aliquam ut ex ut augue consectetur interdum. Donec hendrerit imperdiet. Mauris eleifend fringilla nullam aenean mi ligula.</p>
							</div>


							


						</section>
						<section class="spotlight">
							<div class="image"><img src="images/pic02.jpg" alt="" /></div><div class="content">
								<h2>Tortor dolore feugiat<br />
								elementum magna</h2>
								<p>Aliquam ut ex ut augue consectetur interdum. Donec hendrerit imperdiet. Mauris eleifend fringilla nullam aenean mi ligula.</p>
							</div>
						</section>
						<section class="spotlight">
							<div class="image"><img src="images/pic03.jpg" alt="" /></div><div class="content">
								<h2>Augue eleifend aliquet<br />
								sed condimentum</h2>
								<p>Aliquam ut ex ut augue consectetur interdum. Donec hendrerit imperdiet. Mauris eleifend fringilla nullam aenean mi ligula.</p>
							</div>
						</section>
					</section>

				<!-- Three -->
					<section id="three" class="wrapper style3 special">
						<div class="inner">
							<header class="major">
								<h2>Accumsan mus tortor nunc aliquet</h2>
								<p>Aliquam ut ex ut augue consectetur interdum. Donec amet imperdiet eleifend<br />
								fringilla tincidunt. Nullam dui leo Aenean mi ligula, rhoncus ullamcorper.</p>
							</header>
							<ul class="features">
								<li class="icon fa-paper-plane">
									<h3>Arcu accumsan</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
								<li class="icon solid fa-laptop">
									<h3>Ac Augue Eget</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
								<li class="icon solid fa-code">
									<h3>Mus Scelerisque</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
								<li class="icon solid fa-headphones-alt">
									<h3>Mauris Imperdiet</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
								<li class="icon fa-heart">
									<h3>Aenean Primis</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
								<li class="icon fa-flag">
									<h3>Tortor Ut</h3>
									<p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
								</li>
							</ul>
						</div>
					</section>

				<!-- CTA -->
					<section id="cta" class="wrapper style4">
						<div class="inner">
							<header>
								<h2>Arcue ut vel commodo</h2>
								<p>Aliquam ut ex ut augue consectetur interdum endrerit imperdiet amet eleifend fringilla.</p>
							</header>
							<ul class="actions stacked">
								<li><a href="#" class="button fit primary">Activate</a></li>
								<li><a href="#" class="button fit">Learn More</a></li>
							</ul>
						</div>
					</section>

				<!-- Footer -->
					<footer id="footer">
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>
						<ul class="copyright">
							<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>




	<!-- trial -->							
	<script>

	var mov_matrix = [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];
	var mov_matrixHold = [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];

			// When true, moving the mouse draws on the canvas
	let isDrawing = false;
	let x = 1;
	let y = 1;
	var timeOut;

	let m_oldX = 0;
	let m_oldY = 0;

	let m_angleX = 0;
	let m_angleY = 0;
	

	const glCanvas = document.getElementById('glcanvas');
	// const context = myPics.getContext('2d');


	// event.offsetX, event.offsetY gives the (x,y) offset from the edge of the canvas.

	


		main(x, y, false, mov_matrix);

	
	
		//
		// start here
		//
		function main(x, y, rotates, movMat) 
		{
			//console.log(x);
			//getTime();
			const canvas = document.querySelector("#glcanvas");
			// Initialize the GL context
			const gl = canvas.getContext("webgl");
	
			// Only continue if WebGL is available and working
			if (!gl) 
			{
				alert("Unable to initialize WebGL. Your browser or machine may not support it.");
				return;
			}
			
			




			canvas.addEventListener('mousemove', e => {


				m_angleY = e.offsetX - m_oldX;
				m_angleX = e.offsetY - m_oldY;				

				
				m_oldX = e.offsetX;
				m_oldY = e.offsetY;

				if (m_angleX < -90) m_angleX = -90;
				if (m_angleX > 90) m_angleX = 90;	

				x = m_angleX;
				y = m_angleY;
				

			});

			// Add the event listeners for mousedown, mousemove, and mouseup
			canvas.addEventListener('mousedown', e => {
			// m_oldX = e.offsetX;;
			// m_oldY = e.offsetY;;
			
			});

			

			canvas.addEventListener('mouseup', e => {


				// m_oldX = m_angleY;
				// m_oldY = m_angleX;
				//mov_matrixHold = main(m_angleX, m_angleY, false, mov_matrixHold);

			});





			
			gl.clearColor(0.0, 0.0, 0.0, 1.0);		
			// Clear the color buffer with specified clear color
			gl.clear(gl.COLOR_BUFFER_BIT);


			/*============ Defining and storing the geometry =========*/

			var vertices = [
			-1,-1,-1, 1,-1,-1, 1, 1,-1, -1, 1,-1,
			-1,-1, 1, 1,-1, 1, 1, 1, 1, -1, 1, 1,
			-1,-1,-1, -1, 1,-1, -1, 1, 1, -1,-1, 1,
			1,-1,-1, 1, 1,-1, 1, 1, 1, 1,-1, 1,
			-1,-1,-1, -1,-1, 1, 1,-1, 1, 1,-1,-1,
			-1, 1,-1, -1, 1, 1, 1, 1, 1, 1, 1,-1, 
			];

			var colors = [
			5,3,7, 5,3,7, 5,3,7, 5,3,7,
			1,1,3, 1,1,3, 1,1,3, 1,1,3,
			0,0,1, 0,0,1, 0,0,1, 0,0,1,
			1,0,0, 1,0,0, 1,0,0, 1,0,0,
			1,1,0, 1,1,0, 1,1,0, 1,1,0,
			0,1,0, 0,1,0, 0,1,0, 0,1,0
			];

			var indices = [
			0,1,2, 0,2,3, 4,5,6, 4,6,7,
			8,9,10, 8,10,11, 12,13,14, 12,14,15,
			16,17,18, 16,18,19, 20,21,22, 20,22,23 
			];

			// Create and store data into vertex buffer
			var vertex_buffer = gl.createBuffer ();
			gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);

			// Create and store data into color buffer
			var color_buffer = gl.createBuffer ();
			gl.bindBuffer(gl.ARRAY_BUFFER, color_buffer);
			gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);

			// Create and store data into index buffer
			var index_buffer = gl.createBuffer ();
			gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, index_buffer);
			gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);

			/*=================== Shaders =========================*/

			// var vertCode = '#version 330 core '+

			// 'layout(location = 0) in vec3 ObjectSpace_position; // object-space vertex position'+
			// 'layout(location = 1) in vec3 ObjectSpace_normal;   // object-space vertex normal'+

			// 'uniform mat4 model, view, projection;'+

			// 'out vec3 CameraSpace_position; // eye-space position'+
			// 'out vec3 CameraSpace_normal;   // eye-space normal'+

			// 'void main() {'+
			// 	'CameraSpace_position = (view * model * vec4(ObjectSpace_position, 1.0)).xyz;'+
			// 	'CameraSpace_normal = (view * model * vec4(ObjectSpace_normal, 0.0)).xyz;'+

			// 	'gl_Position = projection * view * model * vec4(ObjectSpace_position, 1.0);'+
			// '}';


			var vertCode = 
			'attribute vec3 ObjectSpace_position;'+
			'attribute vec3 ObjectSpace_normal;'+

			'uniform mat4 Pmatrix;'+
			'uniform mat4 Vmatrix;'+
			'uniform mat4 Mmatrix;'+
			'attribute vec3 color;'+//the color of the point
			'varying vec3 vColor;'+

			'out vec3 CameraSpace_position; // eye-space position'+
			'out vec3 CameraSpace_normal;   // eye-space normal'+


			'void main(void) { '+//pre-built function
				'CameraSpace_position = (view * model * vec4(ObjectSpace_position, 1.0)).xyz;'+
				'CameraSpace_normal = (view * model * vec4(ObjectSpace_normal, 0.0)).xyz;'+
				'gl_Position = Pmatrix*Vmatrix*Mmatrix*vec4(position, 1.);'+
				'vColor = color;'+
			'}';


			var fragCode = 
			'precision mediump float;'+
			'uniform mat4 Mmatrix, Vmatrix, Pmatrix;'+

			// Light properties
			'const vec3 WorldSpace_lightPos = vec3(2, 2, 2); // world-space light position'+


			'in vec3 CameraSpace_position; // eye-space position'+
			'in vec3 CameraSpace_normal;   // eye-space normal'+



			'void main() {'+
				// some vectors that might be helpful (all in camera space, so if you're working in world
				// space you'll need to do these differently)
				'vec3 CameraSpace_toLight = (Vmatrix*vec4(WorldSpace_lightPos,1)).xyz - CameraSpace_position;'+
				'vec3 CameraSpace_toLight_n = normalize(CameraSpace_toLight); // normalized, camera-space vector to light'+
				'vec3 CameraSpace_toEye_n = -normalize(CameraSpace_position); // normalized, camera-space vector to eye'+
				'vec3 CameraSpace_normal_n = normalize(CameraSpace_normal);   // normalized, camera-space normal'+


				'gl_fragColor = color;'+
				// to do: phong lighting model

			'}';



			// var fragCode = 'precision mediump float;'+
			// 'varying vec3 vColor;'+
			// 'void main(void) {'+
			// 	'gl_FragColor = vec4(vColor, 1.);'+
			// '}';

			var vertShader = gl.createShader(gl.VERTEX_SHADER);
			gl.shaderSource(vertShader, vertCode);
			gl.compileShader(vertShader);

			var fragShader = gl.createShader(gl.FRAGMENT_SHADER);
			gl.shaderSource(fragShader, fragCode);
			gl.compileShader(fragShader);

			var shaderProgram = gl.createProgram();
			gl.attachShader(shaderProgram, vertShader);
			gl.attachShader(shaderProgram, fragShader);
			gl.linkProgram(shaderProgram);

			

			/* ====== Associating attributes to vertex shader =====*/
			var Pmatrix = gl.getUniformLocation(shaderProgram, "Pmatrix");
			var Vmatrix = gl.getUniformLocation(shaderProgram, "Vmatrix");
			var Mmatrix = gl.getUniformLocation(shaderProgram, "Mmatrix");

			gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
			var position = gl.getAttribLocation(shaderProgram, "ObjectSpace_position");
			gl.vertexAttribPointer(position, 3, gl.FLOAT, false,0,0) ;


			// Position
			gl.enableVertexAttribArray(position);
			gl.bindBuffer(gl.ARRAY_BUFFER, vertex_buffer);
			var normal = gl.getAttribLocation(shaderProgram, "ObjectSpace_normal");
			gl.vertexAttribPointer(normal, 3, gl.FLOAT, false,0,0) ;


			gl.enableVertexAttribArray(normal);
			gl.bindBuffer(gl.ARRAY_BUFFER, color_buffer);
			var color = gl.getAttribLocation(shaderProgram, "color");
			gl.vertexAttribPointer(color, 3, gl.FLOAT, false,0,0) ;

			// Color
			gl.enableVertexAttribArray(color);
			gl.useProgram(shaderProgram);


			/*==================== MATRIX =====================*/

			function get_projection(angle, a, zMin, zMax) {
			var ang = Math.tan((angle*.5)*Math.PI/180);//angle*.5
			return [
				0.5/ang, 0 , 0, 0,
				0, 0.5*a/ang, 0, 0,
				0, 0, -(zMax+zMin)/(zMax-zMin), -1,
				0, 0, (-2*zMax*zMin)/(zMax-zMin), 0 
			];
			}

			var proj_matrix = get_projection(40, canvas.width/canvas.height, 1, 100);

			var mov_matrix = [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];
			var view_matrix = [1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1];

			// translating z
			view_matrix[14] = view_matrix[14]-6;//zoom

			/*==================== Rotation ====================*/

			function rotateZ(m, angle) {
			var c = Math.cos(angle);
			var s = Math.sin(angle);
			var mv0 = m[0], mv4 = m[4], mv8 = m[8];

			m[0] = c*m[0]-s*m[1];
			m[4] = c*m[4]-s*m[5];
			m[8] = c*m[8]-s*m[9];

			m[1]=c*m[1]+s*mv0;
			m[5]=c*m[5]+s*mv4;
			m[9]=c*m[9]+s*mv8;
			}

			function rotateX(m, angle) {
			var c = Math.cos(angle);
			var s = Math.sin(angle);
			var mv1 = m[1], mv5 = m[5], mv9 = m[9];

			m[1] = m[1]*c-m[2]*s;
			m[5] = m[5]*c-m[6]*s;
			m[9] = m[9]*c-m[10]*s;

			m[2] = m[2]*c+mv1*s;
			m[6] = m[6]*c+mv5*s;
			m[10] = m[10]*c+mv9*s;
			}

			function rotateY(m, angle) {
			var c = Math.cos(angle);
			var s = Math.sin(angle);
			var mv0 = m[0], mv4 = m[4], mv8 = m[8];

			m[0] = c*m[0]+s*m[2];
			m[4] = c*m[4]+s*m[6];
			m[8] = c*m[8]+s*m[10];

			m[2] = c*m[2]-s*mv0;
			m[6] = c*m[6]-s*mv4;
			m[10] = c*m[10]-s*mv8;
			}

			/*================= Drawing ===========================*/
			var time_old = 0;

			

			var animate = function(time) 
			{
				var dt = time-time_old;
				// rotateZ(mov_matrix, dt*0.005);//time
				// rotateY(mov_matrix, dt*0.002);
				// rotateX(mov_matrix, dt*0.003);

				if(!rotates)
				{
					mov_matrix = movMat;
				}
				else{
					
				}

				maxRotSpeed = 10;

				if(x > 1) x -= 0.2;
				else if(x < -1) x += 0.2;

				if(y > 1) y -=0.2;
				else if(y < -1) y += 0.2;


				if(x > maxRotSpeed) x = maxRotSpeed;
				else if(x < -maxRotSpeed) x = -maxRotSpeed;

				if(y > maxRotSpeed) y = maxRotSpeed;
				else if(y < -maxRotSpeed) y = -maxRotSpeed;




				rotateZ(mov_matrix, (x * 3.1415/180.0));//time
				rotateY(mov_matrix, (y * 3.1415/180.0));

				
				
				//rotateX(mov_matrix, dt*0.003);
				
				time_old = time;

				gl.enable(gl.DEPTH_TEST);
				gl.depthFunc(gl.LEQUAL);
				gl.clearColor(0.5, 0.5, 0.5, 0.9);
				gl.clearDepth(1.0);
				gl.useProgram(shaderProgram);

				gl.viewport(0.0, 0.0, canvas.width, canvas.height);
				gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
				gl.uniformMatrix4fv(Pmatrix, false, proj_matrix);
				gl.uniformMatrix4fv(Vmatrix, false, view_matrix);
				gl.uniformMatrix4fv(Mmatrix, false, movMat);
				gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, index_buffer);
				gl.drawElements(gl.TRIANGLES, indices.length, gl.UNSIGNED_SHORT, 0);

				window.requestAnimationFrame(animate);
				
			}
			animate(0);
			return(mov_matrix);

			

		}
	</script>
	<!-- trial -->
</html>
